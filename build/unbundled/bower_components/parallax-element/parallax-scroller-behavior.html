<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html">
<link rel="import" href="parallax-layers.html">

<script>Polymer.ParallaxScrollerBehaviorImpl={properties:{activate:{type:String,value:"auto",observer:"render"},horizontal:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_horizontalChanged"},perspective:{type:Number,value:1,observer:"render"},isBrowserCompatible:{type:Boolean,readOnly:!0,reflectToAttribute:!0,notify:!0},scroller:{type:Object,observer:"_scrollerChanged",value:function(){return this}}},listeners:{"iron-resize":"render"},render:function(){if(this.scroller!==this&&(this.style.perspective="none",this.style["-webkit-perspective"]="none"),this.scroller){this.scroller.style.perspective=this.perspective+"px",this.scroller.style["-webkit-perspective"]=this.perspective+"px";var e=this._parallaxLayersElements;if(e)for(var r,t=0;r=e[t];t++)r&&r.render&&r.render(this.isActivated?this.perspective:0,this.horizontal?this.scroller.clientWidth:this.scroller.clientHeight,this.horizontal)}},get _parallaxLayersElements(){var e=Array.prototype.slice.call(this.querySelectorAll("parallax-layers"));return e.concat(Array.prototype.slice.call(Polymer.dom(this).querySelectorAll("parallax-layers")))},get isActivated(){return this.activate===!0||"true"==this.activate||"auto"==this.activate&&this.isBrowserCompatible},ready:function(){this._checkBrowserCapabilities(),Polymer.dom(this).classList.add("ready"),this._isReady=!0},attached:function(){this._observer=new MutationObserver(function(e){this.render()}.bind(this)),this._observer.observe(this,{childList:!0}),this.async(this.render,10)},detached:function(){this._hasScrollHandler&&this.scroller.removeEventListener("scroll",this._scrollHandler),this._scrollHandler=null},_horizontalChanged:function(e,r){this.scroller&&(this.scroller.scrollTop=this.scroller.scrollLeft=0),this.render()},_scrollerChanged:function(e,r){this._isReady||this._checkBrowserCapabilities(),this._hasScrollHandler&&(r&&r.removeEventListener("scroll",this._scrollHandler),this.scroller.addEventListener("scroll",this._scrollHandler))},_checkBrowserCapabilities:function(){for(var e=navigator.userAgent,r=e.indexOf("Android"),t=new RegExp(/AppleWebKit\/([\d.]+)/),l=t.exec(e),i=null===l?null:parseFloat(t.exec(e)[1]),s=new RegExp(/Chrome\/([\d.]+)/),o=s.exec(e),a=null===o?null:parseFloat(s.exec(e)[1]),n=r&&null!==i&&i<537||null!==a&&a<37,c=e.toLowerCase().indexOf("opr")>-1,h=navigator.userAgent.toLowerCase().indexOf("msie")>-1||navigator.appVersion.toLowerCase().indexOf("trident/")>0,p=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,d=!1,v=["iPad","iPhone","iPod"],u=0;u<v.length;u++)if(navigator.platform===v[u]){d=!0;break}this._setIsBrowserCompatible(!h&&!n),(c||p&&(r||d))&&(this._hasScrollHandler=!0,this._scrollHandler=this._scroll.bind(this))},_scroll:function(e){this.isActivated&&(!this.horizontal&&0!==this.scroller.scrollLeft||this.horizontal&&0!==this.scroller.scrollTop)&&(this.horizontal?this.scroller.scrollTop=0:this.scroller.scrollLeft=0,e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.preventDefault&&e.preventDefault(),e.returnValue=!1)}},Polymer.ParallaxScrollerBehavior=[Polymer.IronResizableBehavior,Polymer.ParallaxScrollerBehaviorImpl];</script></head><body></body></html>